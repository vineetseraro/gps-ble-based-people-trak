
<div class="headlineArea">
    <h3 class="page_header withoutband">App Status</h3>
    <button (click)="export()" class="save">Export</button>
  </div>
  <div class="loading" *ngIf="loader">Loading&#8230;</div>
  
  <div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
    <!--<input #gb type="text" pInputText size="25" placeholder="Search...">
    <i class="fa fa-search" style="margin:0px 0px 0 -30px"></i>-->
  </div>
  
  <p-dataTable sortField="lastTracked" sortOrder="-1" reorderableColumns="true"   scrollable="true" [scrollHeight]="innerHeight" [emptyMessage]="emptyMessage" [value]="dataList" [rows]="rows" [paginator]="true"
   [pageLinks]="3" [rowsPerPageOptions]="[5,10,20,50,100]"  [responsive]="true" class="no-underline-report"
   [totalRecords]="totalRecords" [lazy]="true" (onLazyLoad)="loadData($event)" styleClass="my-table" #dt>
  
     <p-column id="user" field="user" header="{{userType}}" [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
        {{ data.user.trim()?data.user:'--' }}
      </ng-template>		
      </p-column>
      
    <p-column id="devicename" field="devicename" header="Device Name" [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
          {{ data.devicename }}
      </ng-template>		
    </p-column>

    <p-column id="devicecode" field="devicecode" header="Code" [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
          {{ data.devicecode }}
      </ng-template>		
    </p-column>

    <p-column id="appName" field="appName" header="App" [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
          {{data.appName}}
      </ng-template>
    </p-column>
  
    <p-column id="os" field="os" header="OS" [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
        {{data.os}}
      </ng-template>		
    </p-column>

    <p-column id="manufacturer" field="manufacturer" header="Manufacturer" [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
        {{data.manufacturer}}
      </ng-template>		
    </p-column>
   
    <p-column id="bluetoothStatus" field="bluetoothStatus" header="Bluetooth" [sortable]="true"  [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
        {{data.bluetoothStatus}}
      </ng-template>		
    </p-column>

    <p-column id="gpsStatus" field="gpsStatus" header="GPS" [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
        {{ data.gpsStatus }}
      </ng-template>		
    </p-column>

    <p-column id="beaconServiceStatus" field="beaconServiceStatus" header="Beacon Service" [filter]="false" filterPlaceholder="Search">
        <ng-template let-col let-data="rowData" pTemplate="body">
          {{ data.beaconServiceStatus }}
        </ng-template>		
      </p-column>

    <p-column id="isLoggedIn" field="isLoggedIn" header="Logged In" [sortable]="true"  [filter]="false" filterPlaceholder="Search">
      <ng-template let-col let-data="rowData" pTemplate="body">
        {{data.isLoggedIn}}
      </ng-template>		
    </p-column>

    <p-column id="isActive" field="isActive" header="Active" [sortable]="true"  [filter]="false" filterPlaceholder="Search">
        <ng-template let-col let-data="rowData" pTemplate="body">
          {{data.isActive}}
        </ng-template>		
      </p-column>

    <p-column id="isReporting" field="isReporting" header="Reporting" [sortable]="true"  [filter]="false" filterPlaceholder="Search">
        <ng-template let-col let-data="rowData" pTemplate="body">
          {{data.isReporting}}
        </ng-template>		
    </p-column>  

    <p-column id="lastTracked"  field="lastTracked" header="Last Tracked" [sortable]="true" [editable]="true"  [filter]="false"
      [style]="{'overflow':'visible'}" filterMatchMode="equals" filterPlaceholder="Search">
       <ng-template let-col let-data="rowData" pTemplate="body">
         <app-ak-dateformator [date]="data.lastTracked" [format]="'dateTime'"></app-ak-dateformator>
       </ng-template>
     </p-column>

      
  </p-dataTable>
  <span class="number-of-pages">{{pagingmessage}}</span>

  <p-dialog header="Export" [(visible)]="displayExport" class="export-dialog">
      <div class="export-msg">{{exportMessage}}</div>
      <p-footer>
        <button type="button" pButton class="save" (click)="displayExport=false" label="Ok"></button>
      </p-footer>
    </p-dialog>